import{a as ne,b as V,c as g,d as D,e as j,f as R,g as B,h as M,i as k,j as ae,k as G}from"./chunk-ZFHMJJQH.js";import{a as $}from"./chunk-MZX3OHL2.js";import{h as A,i as U,n as re,r as oe,x as q}from"./chunk-7EHL52RH.js";import{Fb as _,Gb as n,Mb as v,Nb as S,Oa as te,Ob as h,Pb as H,Sa as a,Ta as f,W as Z,da as w,ea as ee,fb as L,jb as c,lb as o,na as C,nc as P,oa as y,pc as I,qb as i,qc as N,rb as r,rc as z,sb as u,sc as F,ub as E,uc as T,vc as ie,wb as b,yb as x}from"./chunk-I7RNCANZ.js";var me=e=>({"is-invalid":e});function ue(e,t){e&1&&(i(0,"div",27),n(1," User name is invalid "),r())}function ve(e,t){e&1&&(i(0,"div",27),n(1," Password is invalid "),r())}function ge(e,t){if(e&1&&u(0,"div",28),e&2){let s=x().ngIf;o("innerHtml",s.message,te)}}function _e(e,t){e&1&&(i(0,"div",27),n(1," Server error "),r())}function Se(e,t){if(e&1&&(i(0,"div")(1,"div",23),c(2,ue,2,0,"div",24)(3,ve,2,0,"div",24)(4,ge,1,1,"div",25)(5,_e,2,0,"div",26),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code),a(),o("ngSwitchCase","[jwt_auth] invalid_username"),a(),o("ngSwitchCase","[jwt_auth] incorrect_password"),a(),o("ngSwitchCase","[jwt_auth] uv_authentication_failed")}}function he(e,t){e&1&&(i(0,"div",29),n(1," User name is required "),r())}function we(e,t){e&1&&(i(0,"div",29),n(1," Password is required "),r())}var se=(()=>{let t=class t extends ${constructor(m,d,l,p){super(),this.formBuilder=m,this.authService=d,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],password:["",g.required],rememberMe:[!1]})}onSubmit(){if(this.form.valid){let m=this.form.getRawValue();this.authService.login(m.username,m.password,m.rememberMe)}}};t.\u0275fac=function(d){return new(d||t)(f(k),f(q),f(U),f(A))},t.\u0275cmp=w({type:t,selectors:[["auth-login"]],features:[L],decls:31,vars:12,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],[1,"form-floating"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],[1,"row","align-items-center"],[1,"col-12","col-sm-6"],[1,"form-check","text-start","my-3"],["formControlName","rememberMe","type","checkbox","value","remember-me","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"col-12","col-sm-6","my-12","pb-3","pb-sm-0"],[1,"float-start","float-sm-end"],["routerLink","/auth/reset-password",1,"link-underline"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",3,"innerHtml",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-danger",3,"innerHtml"],[1,"invalid-feedback"]],template:function(d,l){if(d&1){let p=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return C(p),y(l.onSubmit())}),i(5,"h1",5),n(6,"Please sign in"),r(),c(7,Se,6,4,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),n(12,"User name"),r(),c(13,he,2,0,"div",10),r(),i(14,"div",11),u(15,"input",12),i(16,"label",13),n(17,"Password"),r(),c(18,we,2,0,"div",10),r(),i(19,"div",14)(20,"div",15)(21,"div",16),u(22,"input",17),i(23,"label",18),n(24," Remember me "),r()()(),i(25,"div",19)(26,"div",20)(27,"a",21),n(28," Forgot password? "),r()()()(),i(29,"button",22),n(30," Sign in "),r()()()()()}if(d&2){let p=_(4);a(3),o("formGroup",l.form),a(4),o("ngIf",h(8,6,l.authService.errors$)),a(3),o("ngClass",v(8,me,l.form.controls.username.invalid&&(l.form.controls.username.touched||p.submitted))),a(3),o("ngIf",l.form.controls.username.hasError("required")),a(2),o("ngClass",v(10,me,l.form.controls.password.invalid&&(l.form.controls.password.touched||p.submitted))),a(3),o("ngIf",l.form.controls.password.hasError("required"))}},dependencies:[P,I,N,z,F,re,R,V,ne,D,j,B,M,T]});let e=t;return e})();var K=e=>({"is-invalid":e});function Ce(e,t){e&1&&(i(0,"div",23),n(1," Sorry, that username already exists "),r())}function ye(e,t){e&1&&(i(0,"div",23),n(1," Server error "),r())}function Ee(e,t){if(e&1&&(i(0,"div")(1,"div",20),c(2,Ce,2,0,"div",21)(3,ye,2,0,"div",22),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code),a(),o("ngSwitchCase","existing_user_login")}}function be(e,t){e&1&&(i(0,"div",24),n(1," User name is required "),r())}function xe(e,t){e&1&&(i(0,"div",24),n(1," Email is required "),r())}function Pe(e,t){e&1&&(i(0,"div",24),n(1," Email format is wrong "),r())}function Ie(e,t){e&1&&(i(0,"div",24),n(1," Password is required "),r())}function Ne(e,t){e&1&&(i(0,"div",24),n(1," Password is required "),r())}function Fe(e,t){e&1&&(i(0,"div",24),n(1," Passwords do not match "),r())}function Te(e,t){if(e&1&&(i(0,"div")(1,"h1",7),n(2,"Please sign up"),r(),c(3,Ee,4,2,"div",8),S(4,"async"),i(5,"div",9),u(6,"input",10),i(7,"label",11),n(8,"User name"),r(),c(9,be,2,0,"div",12),r(),i(10,"div",9),u(11,"input",13),i(12,"label",14),n(13,"Email"),r(),c(14,xe,2,0,"div",12)(15,Pe,2,0,"div",12),r(),i(16,"div",9),u(17,"input",15),i(18,"label",16),n(19,"Password"),r(),c(20,Ie,2,0,"div",12),r(),i(21,"div",9),u(22,"input",17),i(23,"label",18),n(24,"Confirm password"),r(),c(25,Ne,2,0,"div",12)(26,Fe,2,0,"div",12),r(),i(27,"button",19),n(28," Sign up "),r()()),e&2){let s=x(),m=_(4);a(3),o("ngIf",h(4,11,s.authService.errors$)),a(3),o("ngClass",v(13,K,s.form.controls.username.invalid&&(s.form.controls.username.touched||m.submitted))),a(3),o("ngIf",s.form.controls.username.hasError("required")),a(2),o("ngClass",v(15,K,s.form.controls.email.invalid&&(s.form.controls.email.touched||m.submitted))),a(3),o("ngIf",s.form.controls.email.hasError("required")),a(),o("ngIf",s.form.controls.email.hasError("email")),a(2),o("ngClass",v(17,K,s.form.controls.password.invalid&&(s.form.controls.password.touched||m.submitted))),a(3),o("ngIf",s.form.controls.password.hasError("required")),a(2),o("ngClass",v(19,K,s.form.controls.confirmPassword.invalid&&(s.form.controls.confirmPassword.touched||m.submitted))),a(3),o("ngIf",s.form.controls.confirmPassword.hasError("required")),a(),o("ngIf",s.form.controls.confirmPassword.hasError("doNotMatch"))}}function qe(e,t){e&1&&(i(0,"div",25),n(1," User created. Please check your emain and confirm. "),r())}var de=(()=>{let t=class t extends ${constructor(m,d,l,p){super(),this.formBuilder=m,this.authService=d,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],email:["",[g.required,G.email()]],password:["",g.required],confirmPassword:["",[g.required,G.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let m=this.form.getRawValue();this.authService.signup(m)}}};t.\u0275fac=function(d){return new(d||t)(f(k),f(q),f(U),f(A))},t.\u0275cmp=w({type:t,selectors:[["auth-signup"]],features:[L],decls:9,vars:5,consts:[["ngForm","ngForm"],["submitResult",""],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[4,"ngIf","ngIfElse"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-success"]],template:function(d,l){if(d&1){let p=E();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"form",5,0),b("ngSubmit",function(){return C(p),y(l.onSubmit())}),c(5,Te,29,21,"div",6),S(6,"async"),r(),c(7,qe,2,0,"ng-template",null,1,H),r()()()}if(d&2){let p=_(8);a(3),o("formGroup",l.form),a(2),o("ngIf",!h(6,3,l.authService.signupResponses$))("ngIfElse",p)}},dependencies:[P,I,N,z,F,R,V,D,j,B,M,T]});let e=t;return e})();var O=e=>({"is-invalid":e});function Ve(e,t){e&1&&(i(0,"div",20),n(1," Server error "),r())}function De(e,t){if(e&1&&(i(0,"div")(1,"div",18),c(2,Ve,2,0,"div",19),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code)}}function je(e,t){e&1&&(i(0,"div",21),n(1," Email is required "),r())}function Re(e,t){e&1&&(i(0,"div",21),n(1," Email format is wrong "),r())}function Be(e,t){e&1&&(i(0,"div",21),n(1," Code is required "),r())}function Me(e,t){e&1&&(i(0,"div",21),n(1," Password is required "),r())}function ke(e,t){e&1&&(i(0,"div",21),n(1," Password is required "),r())}function Ge(e,t){e&1&&(i(0,"div",21),n(1," Passwords do not match "),r())}var ce=(()=>{let t=class t{constructor(m,d){this.formBuilder=m,this.authService=d,this.form=this.formBuilder.nonNullable.group({email:[{value:this.email,disabled:!0},[(g.required,G.email())]],code:["",g.required],password:["",g.required],confirmPassword:["",[g.required,G.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let m=this.form.getRawValue();this.authService.setPassword(m.email,m.code,m.password)}}};t.\u0275fac=function(d){return new(d||t)(f(k),f(q))},t.\u0275cmp=w({type:t,selectors:[["auth-set-password"]],inputs:{email:"email"},decls:33,vars:22,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","code","id","floatingCode","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingCode"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"]],template:function(d,l){if(d&1){let p=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return C(p),y(l.onSubmit())}),i(5,"h1",5),n(6,"Set password"),r(),c(7,De,3,1,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),n(12,"Email"),r(),c(13,je,2,0,"div",10)(14,Re,2,0,"div",10),r(),i(15,"div",7),u(16,"input",11),i(17,"label",12),n(18,"Code"),r(),c(19,Be,2,0,"div",10),r(),i(20,"div",7),u(21,"input",13),i(22,"label",14),n(23,"Password"),r(),c(24,Me,2,0,"div",10),r(),i(25,"div",7),u(26,"input",15),i(27,"label",16),n(28,"Confirm password"),r(),c(29,ke,2,0,"div",10)(30,Ge,2,0,"div",10),r(),i(31,"button",17),n(32,"Submit"),r()()()()()}if(d&2){let p=_(4);a(3),o("formGroup",l.form),a(4),o("ngIf",h(8,12,l.authService.errors$)),a(3),o("ngClass",v(14,O,l.form.controls.email.invalid&&(l.form.controls.email.touched||p.submitted))),a(3),o("ngIf",l.form.controls.email.hasError("required")),a(),o("ngIf",l.form.controls.email.hasError("email")),a(2),o("ngClass",v(16,O,l.form.controls.code.invalid&&(l.form.controls.code.touched||p.submitted))),a(3),o("ngIf",l.form.controls.code.hasError("required")),a(2),o("ngClass",v(18,O,l.form.controls.password.invalid&&(l.form.controls.password.touched||p.submitted))),a(3),o("ngIf",l.form.controls.password.hasError("required")),a(2),o("ngClass",v(20,O,l.form.controls.confirmPassword.invalid&&(l.form.controls.confirmPassword.touched||p.submitted))),a(3),o("ngIf",l.form.controls.confirmPassword.hasError("required")),a(),o("ngIf",l.form.controls.confirmPassword.hasError("doNotMatch"))}},dependencies:[P,I,N,F,R,V,D,j,B,M,T]});let e=t;return e})();var Ae=e=>({"is-invalid":e});function Ue(e,t){e&1&&(i(0,"div",16),n(1," Server error "),r())}function $e(e,t){if(e&1&&(i(0,"div")(1,"div",14),c(2,Ue,2,0,"div",15),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code)}}function He(e,t){e&1&&(i(0,"div",17),n(1," Email is required "),r())}function ze(e,t){e&1&&(i(0,"div",17),n(1," Email format is wrong "),r())}function Je(e,t){if(e&1){let s=E();i(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6,1),b("ngSubmit",function(){C(s);let d=x();return y(d.onSubmit())}),i(5,"h1",7),n(6,"Reset password"),r(),c(7,$e,3,1,"div",8),S(8,"async"),i(9,"div",9),u(10,"input",10),i(11,"label",11),n(12,"Email"),r(),c(13,He,2,0,"div",12)(14,ze,2,0,"div",12),r(),i(15,"button",13),n(16,"Submit"),r()()()()()}if(e&2){let s=_(4),m=x();a(3),o("formGroup",m.form),a(4),o("ngIf",h(8,5,m.authService.errors$)),a(3),o("ngClass",v(7,Ae,m.form.controls.email.invalid&&(m.form.controls.email.touched||s.submitted))),a(3),o("ngIf",m.form.controls.email.hasError("required")),a(),o("ngIf",m.form.controls.email.hasError("email"))}}function Ke(e,t){if(e&1&&u(0,"auth-set-password",18),e&2){let s=x();o("email",s.form.controls.email.value)}}var pe=(()=>{let t=class t extends ${constructor(m,d,l,p){super(),this.formBuilder=m,this.authService=d,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({email:["",[g.required,G.email()]]})}onSubmit(){this.form.valid&&this.authService.resetPassword(this.form.controls.email.value)}};t.\u0275fac=function(d){return new(d||t)(f(k),f(q),f(U),f(A))},t.\u0275cmp=w({type:t,selectors:[["auth-reset-password"]],features:[L],decls:4,vars:4,consts:[["setPassword",""],["ngForm","ngForm"],["class","component",4,"ngIf","ngIfElse"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],[3,"email"]],template:function(d,l){if(d&1&&(c(0,Je,17,9,"div",2),S(1,"async"),c(2,Ke,1,1,"ng-template",null,0,H)),d&2){let p=_(3);o("ngIf",!h(1,2,l.authService.resetPasswordResponses$))("ngIfElse",p)}},dependencies:[P,I,N,F,R,V,D,j,B,M,ce,T]});let e=t;return e})();var fe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:se},{path:"signup",component:de},{path:"reset-password",component:pe}];var bt=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275mod=ee({type:t}),t.\u0275inj=Z({imports:[ie,oe.forChild(fe),ae]});let e=t;return e})();export{bt as AuthModule};
