import{b as me}from"./chunk-GISAZCCP.js";import{a as ne,b as V,c as g,d as D,e as j,f as R,g as k,h as B,i as M,j as ae,k as A}from"./chunk-3OFLKDCS.js";import"./chunk-SJO7BEHK.js";import{a as $}from"./chunk-ZQB67P3A.js";import{h as L,i as U,n as re,r as oe,s as q}from"./chunk-OEF37O7S.js";import"./chunk-WXI33M2S.js";import{Gb as _,Hb as n,Nb as v,Ob as S,Pa as te,Pb as h,Qb as H,Ta as a,Ua as f,X as Z,ea as w,fa as ee,gb as G,kb as c,mb as o,oa as C,oc as P,pa as y,qc as I,rb as i,rc as N,sb as r,sc as z,tb as u,tc as T,vb as E,vc as F,wc as ie,xb as b,zb as x}from"./chunk-2I4HIRHG.js";var le=e=>({"is-invalid":e});function ve(e,t){e&1&&(i(0,"div",27),n(1," User name is invalid "),r())}function ge(e,t){e&1&&(i(0,"div",27),n(1," Password is invalid "),r())}function _e(e,t){e&1&&(i(0,"div",27),n(1," Invalid credential "),r())}function Se(e,t){e&1&&(i(0,"div",27),n(1," Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. "),r())}function he(e,t){if(e&1&&u(0,"div",28),e&2){let s=x().ngIf;o("innerHtml",s.message,te)}}function we(e,t){e&1&&(i(0,"div",27),n(1," Server error "),r())}function Ce(e,t){if(e&1&&(i(0,"div")(1,"div",23),c(2,ve,2,0,"div",24)(3,ge,2,0,"div",24)(4,_e,2,0,"div",24)(5,Se,2,0,"div",24)(6,he,1,1,"div",25)(7,we,2,0,"div",26),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code),a(),o("ngSwitchCase","[jwt_auth] invalid_username"),a(),o("ngSwitchCase","[jwt_auth] incorrect_password"),a(),o("ngSwitchCase","auth/invalid-credential"),a(),o("ngSwitchCase","auth/too-many-requests"),a(),o("ngSwitchCase","[jwt_auth] uv_authentication_failed")}}function ye(e,t){e&1&&(i(0,"div",29),n(1," User name is required "),r())}function Ee(e,t){e&1&&(i(0,"div",29),n(1," Password is required "),r())}var de=(()=>{let t=class t extends ${constructor(l,d,m,p){super(),this.formBuilder=l,this.authService=d,this.titleService=m,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],password:["",g.required],rememberMe:[!1]})}onSubmit(){if(this.form.valid){let l=this.form.getRawValue();this.authService.login(l.username,l.password,l.rememberMe)}}};t.\u0275fac=function(d){return new(d||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=w({type:t,selectors:[["auth-login"]],features:[G],decls:31,vars:12,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],[1,"form-floating"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],[1,"row","align-items-center"],[1,"col-12","col-sm-6"],[1,"form-check","text-start","my-3"],["formControlName","rememberMe","type","checkbox","value","remember-me","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"col-12","col-sm-6","my-12","pb-3","pb-sm-0"],[1,"float-start","float-sm-end"],["routerLink","/auth/reset-password",1,"link-underline"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",3,"innerHtml",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-danger",3,"innerHtml"],[1,"invalid-feedback"]],template:function(d,m){if(d&1){let p=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return C(p),y(m.onSubmit())}),i(5,"h1",5),n(6,"Please sign in"),r(),c(7,Ce,8,6,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),n(12,"User name"),r(),c(13,ye,2,0,"div",10),r(),i(14,"div",11),u(15,"input",12),i(16,"label",13),n(17,"Password"),r(),c(18,Ee,2,0,"div",10),r(),i(19,"div",14)(20,"div",15)(21,"div",16),u(22,"input",17),i(23,"label",18),n(24," Remember me "),r()()(),i(25,"div",19)(26,"div",20)(27,"a",21),n(28," Forgot password? "),r()()()(),i(29,"button",22),n(30," Sign in "),r()()()()()}if(d&2){let p=_(4);a(3),o("formGroup",m.form),a(4),o("ngIf",h(8,6,m.authService.errors$)),a(3),o("ngClass",v(8,le,m.form.controls.username.invalid&&(m.form.controls.username.touched||p.submitted))),a(3),o("ngIf",m.form.controls.username.hasError("required")),a(2),o("ngClass",v(10,le,m.form.controls.password.invalid&&(m.form.controls.password.touched||p.submitted))),a(3),o("ngIf",m.form.controls.password.hasError("required"))}},dependencies:[P,I,N,z,T,re,R,V,ne,D,j,k,B,F]});let e=t;return e})();var J=e=>({"is-invalid":e});function be(e,t){e&1&&(i(0,"div",23),n(1," Sorry, that username already exists "),r())}function xe(e,t){e&1&&(i(0,"div",23),n(1," Server error "),r())}function Pe(e,t){if(e&1&&(i(0,"div")(1,"div",20),c(2,be,2,0,"div",21)(3,xe,2,0,"div",22),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code),a(),o("ngSwitchCase","existing_user_login")}}function Ie(e,t){e&1&&(i(0,"div",24),n(1," User name is required "),r())}function Ne(e,t){e&1&&(i(0,"div",24),n(1," Email is required "),r())}function Te(e,t){e&1&&(i(0,"div",24),n(1," Email format is wrong "),r())}function Fe(e,t){e&1&&(i(0,"div",24),n(1," Password is required "),r())}function qe(e,t){e&1&&(i(0,"div",24),n(1," Password is required "),r())}function Ve(e,t){e&1&&(i(0,"div",24),n(1," Passwords do not match "),r())}function De(e,t){if(e&1&&(i(0,"div")(1,"h1",7),n(2,"Please sign up"),r(),c(3,Pe,4,2,"div",8),S(4,"async"),i(5,"div",9),u(6,"input",10),i(7,"label",11),n(8,"User name"),r(),c(9,Ie,2,0,"div",12),r(),i(10,"div",9),u(11,"input",13),i(12,"label",14),n(13,"Email"),r(),c(14,Ne,2,0,"div",12)(15,Te,2,0,"div",12),r(),i(16,"div",9),u(17,"input",15),i(18,"label",16),n(19,"Password"),r(),c(20,Fe,2,0,"div",12),r(),i(21,"div",9),u(22,"input",17),i(23,"label",18),n(24,"Confirm password"),r(),c(25,qe,2,0,"div",12)(26,Ve,2,0,"div",12),r(),i(27,"button",19),n(28," Sign up "),r()()),e&2){let s=x(),l=_(4);a(3),o("ngIf",h(4,11,s.authService.errors$)),a(3),o("ngClass",v(13,J,s.form.controls.username.invalid&&(s.form.controls.username.touched||l.submitted))),a(3),o("ngIf",s.form.controls.username.hasError("required")),a(2),o("ngClass",v(15,J,s.form.controls.email.invalid&&(s.form.controls.email.touched||l.submitted))),a(3),o("ngIf",s.form.controls.email.hasError("required")),a(),o("ngIf",s.form.controls.email.hasError("email")),a(2),o("ngClass",v(17,J,s.form.controls.password.invalid&&(s.form.controls.password.touched||l.submitted))),a(3),o("ngIf",s.form.controls.password.hasError("required")),a(2),o("ngClass",v(19,J,s.form.controls.confirmPassword.invalid&&(s.form.controls.confirmPassword.touched||l.submitted))),a(3),o("ngIf",s.form.controls.confirmPassword.hasError("required")),a(),o("ngIf",s.form.controls.confirmPassword.hasError("doNotMatch"))}}function je(e,t){e&1&&(i(0,"div",25),n(1," User created. Please check your emain and confirm. "),r())}var ce=(()=>{let t=class t extends ${constructor(l,d,m,p){super(),this.formBuilder=l,this.authService=d,this.titleService=m,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],email:["",[g.required,A.email()]],password:["",g.required],confirmPassword:["",[g.required,A.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let l=this.form.getRawValue();this.authService.signup(this.form.controls.username.value,this.form.controls.email.value,this.form.controls.password.value)}}};t.\u0275fac=function(d){return new(d||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=w({type:t,selectors:[["auth-signup"]],features:[G],decls:9,vars:5,consts:[["ngForm","ngForm"],["submitResult",""],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[4,"ngIf","ngIfElse"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-success"]],template:function(d,m){if(d&1){let p=E();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"form",5,0),b("ngSubmit",function(){return C(p),y(m.onSubmit())}),c(5,De,29,21,"div",6),S(6,"async"),r(),c(7,je,2,0,"ng-template",null,1,H),r()()()}if(d&2){let p=_(8);a(3),o("formGroup",m.form),a(2),o("ngIf",!h(6,3,m.authService.signupResponses$))("ngIfElse",p)}},dependencies:[P,I,N,z,T,R,V,D,j,k,B,F]});let e=t;return e})();var K=e=>({"is-invalid":e});function Re(e,t){e&1&&(i(0,"div",20),n(1," Server error "),r())}function ke(e,t){if(e&1&&(i(0,"div")(1,"div",18),c(2,Re,2,0,"div",19),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code)}}function Be(e,t){e&1&&(i(0,"div",21),n(1," Email is required "),r())}function Me(e,t){e&1&&(i(0,"div",21),n(1," Email format is wrong "),r())}function Ae(e,t){e&1&&(i(0,"div",21),n(1," Code is required "),r())}function Ge(e,t){e&1&&(i(0,"div",21),n(1," Password is required "),r())}function Le(e,t){e&1&&(i(0,"div",21),n(1," Password is required "),r())}function Ue(e,t){e&1&&(i(0,"div",21),n(1," Passwords do not match "),r())}var pe=(()=>{let t=class t{constructor(l,d){this.formBuilder=l,this.authService=d,this.form=this.formBuilder.nonNullable.group({email:[{value:this.email,disabled:!0},[(g.required,A.email())]],code:["",g.required],password:["",g.required],confirmPassword:["",[g.required,A.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let l=this.form.getRawValue();this.authService.setPassword(l.email,l.code,l.password)}}};t.\u0275fac=function(d){return new(d||t)(f(M),f(q))},t.\u0275cmp=w({type:t,selectors:[["auth-set-password"]],inputs:{email:"email"},decls:33,vars:22,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","code","id","floatingCode","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingCode"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"]],template:function(d,m){if(d&1){let p=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return C(p),y(m.onSubmit())}),i(5,"h1",5),n(6,"Set password"),r(),c(7,ke,3,1,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),n(12,"Email"),r(),c(13,Be,2,0,"div",10)(14,Me,2,0,"div",10),r(),i(15,"div",7),u(16,"input",11),i(17,"label",12),n(18,"Code"),r(),c(19,Ae,2,0,"div",10),r(),i(20,"div",7),u(21,"input",13),i(22,"label",14),n(23,"Password"),r(),c(24,Ge,2,0,"div",10),r(),i(25,"div",7),u(26,"input",15),i(27,"label",16),n(28,"Confirm password"),r(),c(29,Le,2,0,"div",10)(30,Ue,2,0,"div",10),r(),i(31,"button",17),n(32,"Submit"),r()()()()()}if(d&2){let p=_(4);a(3),o("formGroup",m.form),a(4),o("ngIf",h(8,12,m.authService.errors$)),a(3),o("ngClass",v(14,K,m.form.controls.email.invalid&&(m.form.controls.email.touched||p.submitted))),a(3),o("ngIf",m.form.controls.email.hasError("required")),a(),o("ngIf",m.form.controls.email.hasError("email")),a(2),o("ngClass",v(16,K,m.form.controls.code.invalid&&(m.form.controls.code.touched||p.submitted))),a(3),o("ngIf",m.form.controls.code.hasError("required")),a(2),o("ngClass",v(18,K,m.form.controls.password.invalid&&(m.form.controls.password.touched||p.submitted))),a(3),o("ngIf",m.form.controls.password.hasError("required")),a(2),o("ngClass",v(20,K,m.form.controls.confirmPassword.invalid&&(m.form.controls.confirmPassword.touched||p.submitted))),a(3),o("ngIf",m.form.controls.confirmPassword.hasError("required")),a(),o("ngIf",m.form.controls.confirmPassword.hasError("doNotMatch"))}},dependencies:[P,I,N,T,R,V,D,j,k,B,F]});let e=t;return e})();var He=e=>({"is-invalid":e});function ze(e,t){e&1&&(i(0,"div",16),n(1," Server error "),r())}function Ye(e,t){if(e&1&&(i(0,"div")(1,"div",14),c(2,ze,2,0,"div",15),r()()),e&2){let s=t.ngIf;a(),o("ngSwitch",s.code)}}function Je(e,t){e&1&&(i(0,"div",17),n(1," Email is required "),r())}function Ke(e,t){e&1&&(i(0,"div",17),n(1," Email format is wrong "),r())}function Oe(e,t){if(e&1){let s=E();i(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6,1),b("ngSubmit",function(){C(s);let d=x();return y(d.onSubmit())}),i(5,"h1",7),n(6,"Reset password"),r(),c(7,Ye,3,1,"div",8),S(8,"async"),i(9,"div",9),u(10,"input",10),i(11,"label",11),n(12,"Email"),r(),c(13,Je,2,0,"div",12)(14,Ke,2,0,"div",12),r(),i(15,"button",13),n(16,"Submit"),r()()()()()}if(e&2){let s=_(4),l=x();a(3),o("formGroup",l.form),a(4),o("ngIf",h(8,5,l.authService.errors$)),a(3),o("ngClass",v(7,He,l.form.controls.email.invalid&&(l.form.controls.email.touched||s.submitted))),a(3),o("ngIf",l.form.controls.email.hasError("required")),a(),o("ngIf",l.form.controls.email.hasError("email"))}}function Qe(e,t){if(e&1&&u(0,"auth-set-password",18),e&2){let s=x();o("email",s.form.controls.email.value)}}var fe=(()=>{let t=class t extends ${constructor(l,d,m,p){super(),this.formBuilder=l,this.authService=d,this.titleService=m,this.metaService=p,this.form=this.formBuilder.nonNullable.group({email:["",[g.required,A.email()]]})}onSubmit(){this.form.valid&&this.authService.resetPassword(this.form.controls.email.value)}};t.\u0275fac=function(d){return new(d||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=w({type:t,selectors:[["auth-reset-password"]],features:[G],decls:4,vars:4,consts:[["setPassword",""],["ngForm","ngForm"],["class","component",4,"ngIf","ngIfElse"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],[3,"email"]],template:function(d,m){if(d&1&&(c(0,Oe,17,9,"div",2),S(1,"async"),c(2,Qe,1,1,"ng-template",null,0,H)),d&2){let p=_(3);o("ngIf",!h(1,2,m.authService.resetPasswordResponses$))("ngIfElse",p)}},dependencies:[P,I,N,T,R,V,D,j,k,B,pe,F]});let e=t;return e})();var ue=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:de},{path:"signup",component:ce},{path:"reset-password",component:fe}];function Ft(e){return me}var qt=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275mod=ee({type:t}),t.\u0275inj=Z({imports:[ie,oe.forChild(ue),ae]});let e=t;return e})();export{qt as AuthModule,Ft as getAuthService};
