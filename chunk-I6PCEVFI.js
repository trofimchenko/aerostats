import{b as ae}from"./chunk-XM6FMF4D.js";import{a as oe,b as V,c as g,d as D,e as R,f as j,g as k,h as B,i as M,j as ne,k as G}from"./chunk-3OFLKDCS.js";import"./chunk-BO4C4CEY.js";import{a as $}from"./chunk-75TWNABG.js";import{h as L,i as U,n as ie,r as re,s as q}from"./chunk-WMMAKMVG.js";import"./chunk-WXI33M2S.js";import{Gb as _,Hb as a,Nb as v,Ob as S,Pa as ee,Pb as h,Qb as H,Ta as m,Ua as f,X,ea as C,fa as Z,gb as A,kb as d,mb as o,oa as y,oc as P,pa as E,qc as I,rb as i,rc as N,sb as r,sc as z,tb as u,tc as T,vb as x,vc as F,wc as te,xb as b,zb as w}from"./chunk-2I4HIRHG.js";var me=e=>({"is-invalid":e});function ve(e,t){e&1&&(i(0,"div",27),a(1," User name is invalid "),r())}function ge(e,t){e&1&&(i(0,"div",27),a(1," Password is invalid "),r())}function _e(e,t){e&1&&(i(0,"div",27),a(1," Invalid credential "),r())}function Se(e,t){e&1&&(i(0,"div",27),a(1," Access to this account has been temporarily disabled due to many failed login attempts. You can immediately restore it by resetting your password or you can try again later. "),r())}function he(e,t){if(e&1&&u(0,"div",28),e&2){let c=w().ngIf;o("innerHtml",c.message,ee)}}function we(e,t){e&1&&(i(0,"div",27),a(1," Server error "),r())}function Ce(e,t){if(e&1&&(i(0,"div")(1,"div",23),d(2,ve,2,0,"div",24)(3,ge,2,0,"div",24)(4,_e,2,0,"div",24)(5,Se,2,0,"div",24)(6,he,1,1,"div",25)(7,we,2,0,"div",26),r()()),e&2){let c=t.ngIf;m(),o("ngSwitch",c.code),m(),o("ngSwitchCase","[jwt_auth] invalid_username"),m(),o("ngSwitchCase","[jwt_auth] incorrect_password"),m(),o("ngSwitchCase","auth/invalid-credential"),m(),o("ngSwitchCase","auth/too-many-requests"),m(),o("ngSwitchCase","[jwt_auth] uv_authentication_failed")}}function ye(e,t){e&1&&(i(0,"div",29),a(1," User name is required "),r())}function Ee(e,t){e&1&&(i(0,"div",29),a(1," Password is required "),r())}var se=(()=>{let t=class t extends ${constructor(n,s,l,p){super(),this.formBuilder=n,this.authService=s,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],password:["",g.required],rememberMe:[!1]})}onSubmit(){if(this.form.valid){let n=this.form.getRawValue();this.authService.login(n.username,n.password,n.rememberMe)}}};t.\u0275fac=function(s){return new(s||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=C({type:t,selectors:[["auth-login"]],features:[A],decls:31,vars:12,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],[1,"form-floating"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],[1,"row","align-items-center"],[1,"col-12","col-sm-6"],[1,"form-check","text-start","my-3"],["formControlName","rememberMe","type","checkbox","value","remember-me","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"col-12","col-sm-6","my-12","pb-3","pb-sm-0"],[1,"float-start","float-sm-end"],["routerLink","/auth/reset-password",1,"link-underline"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",3,"innerHtml",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-danger",3,"innerHtml"],[1,"invalid-feedback"]],template:function(s,l){if(s&1){let p=x();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return y(p),E(l.onSubmit())}),i(5,"h1",5),a(6,"Please sign in"),r(),d(7,Ce,8,6,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),a(12,"User name"),r(),d(13,ye,2,0,"div",10),r(),i(14,"div",11),u(15,"input",12),i(16,"label",13),a(17,"Password"),r(),d(18,Ee,2,0,"div",10),r(),i(19,"div",14)(20,"div",15)(21,"div",16),u(22,"input",17),i(23,"label",18),a(24," Remember me "),r()()(),i(25,"div",19)(26,"div",20)(27,"a",21),a(28," Forgot password? "),r()()()(),i(29,"button",22),a(30," Sign in "),r()()()()()}if(s&2){let p=_(4);m(3),o("formGroup",l.form),m(4),o("ngIf",h(8,6,l.authService.errors$)),m(3),o("ngClass",v(8,me,l.form.controls.username.invalid&&(l.form.controls.username.touched||p.submitted))),m(3),o("ngIf",l.form.controls.username.hasError("required")),m(2),o("ngClass",v(10,me,l.form.controls.password.invalid&&(l.form.controls.password.touched||p.submitted))),m(3),o("ngIf",l.form.controls.password.hasError("required"))}},dependencies:[P,I,N,z,T,ie,j,V,oe,D,R,k,B,F]});let e=t;return e})();var J=e=>({"is-invalid":e});function xe(e,t){e&1&&(i(0,"div",23),a(1," Sorry, that username already exists "),r())}function be(e,t){e&1&&(i(0,"div",23),a(1," Server error "),r())}function Pe(e,t){if(e&1&&(i(0,"div")(1,"div",20),d(2,xe,2,0,"div",21)(3,be,2,0,"div",22),r()()),e&2){let c=t.ngIf;m(),o("ngSwitch",c.code),m(),o("ngSwitchCase","existing_user_login")}}function Ie(e,t){e&1&&(i(0,"div",24),a(1," User name is required "),r())}function Ne(e,t){e&1&&(i(0,"div",24),a(1," Email is required "),r())}function Te(e,t){e&1&&(i(0,"div",24),a(1," Email format is wrong "),r())}function Fe(e,t){e&1&&(i(0,"div",24),a(1," Password is required "),r())}function qe(e,t){e&1&&(i(0,"div",24),a(1," Password is required "),r())}function Ve(e,t){e&1&&(i(0,"div",24),a(1," Passwords do not match "),r())}function De(e,t){if(e&1){let c=x();i(0,"form",6,1),b("ngSubmit",function(){y(c);let s=w();return E(s.onSubmit())}),i(2,"div")(3,"h1",7),a(4,"Please sign up"),r(),d(5,Pe,4,2,"div",8),S(6,"async"),i(7,"div",9),u(8,"input",10),i(9,"label",11),a(10,"User name"),r(),d(11,Ie,2,0,"div",12),r(),i(12,"div",9),u(13,"input",13),i(14,"label",14),a(15,"Email"),r(),d(16,Ne,2,0,"div",12)(17,Te,2,0,"div",12),r(),i(18,"div",9),u(19,"input",15),i(20,"label",16),a(21,"Password"),r(),d(22,Fe,2,0,"div",12),r(),i(23,"div",9),u(24,"input",17),i(25,"label",18),a(26,"Confirm password"),r(),d(27,qe,2,0,"div",12)(28,Ve,2,0,"div",12),r(),i(29,"button",19),a(30," Sign up "),r()()()}if(e&2){let c=_(1),n=w();o("formGroup",n.form),m(5),o("ngIf",h(6,12,n.authService.errors$)),m(3),o("ngClass",v(14,J,n.form.controls.username.invalid&&(n.form.controls.username.touched||c.submitted))),m(3),o("ngIf",n.form.controls.username.hasError("required")),m(2),o("ngClass",v(16,J,n.form.controls.email.invalid&&(n.form.controls.email.touched||c.submitted))),m(3),o("ngIf",n.form.controls.email.hasError("required")),m(),o("ngIf",n.form.controls.email.hasError("email")),m(2),o("ngClass",v(18,J,n.form.controls.password.invalid&&(n.form.controls.password.touched||c.submitted))),m(3),o("ngIf",n.form.controls.password.hasError("required")),m(2),o("ngClass",v(20,J,n.form.controls.confirmPassword.invalid&&(n.form.controls.confirmPassword.touched||c.submitted))),m(3),o("ngIf",n.form.controls.confirmPassword.hasError("required")),m(),o("ngIf",n.form.controls.confirmPassword.hasError("doNotMatch"))}}function Re(e,t){e&1&&(i(0,"div",25),a(1," User created. Please check your emain and confirm. "),r())}var de=(()=>{let t=class t extends ${constructor(n,s,l,p){super(),this.formBuilder=n,this.authService=s,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({username:["",[g.required]],email:["",[g.required,G.email()]],password:["",g.required],confirmPassword:["",[g.required,G.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let n=this.form.getRawValue();this.authService.signup(this.form.controls.username.value,this.form.controls.email.value,this.form.controls.password.value)}}};t.\u0275fac=function(s){return new(s||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=C({type:t,selectors:[["auth-signup"]],features:[A],decls:7,vars:4,consts:[["submitResult",""],["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","text","formControlName","username","id","floatingUsername","placeholder","","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingUsername"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchCase"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-success"]],template:function(s,l){if(s&1&&(i(0,"div",2)(1,"div",3)(2,"div",4),d(3,De,31,22,"form",5),S(4,"async"),d(5,Re,2,0,"ng-template",null,0,H),r()()()),s&2){let p=_(6);m(3),o("ngIf",!h(4,2,l.authService.signupResponses$))("ngIfElse",p)}},dependencies:[P,I,N,z,T,j,V,D,R,k,B,F]});let e=t;return e})();var K=e=>({"is-invalid":e});function je(e,t){e&1&&(i(0,"div",20),a(1," Server error "),r())}function ke(e,t){if(e&1&&(i(0,"div")(1,"div",18),d(2,je,2,0,"div",19),r()()),e&2){let c=t.ngIf;m(),o("ngSwitch",c.code)}}function Be(e,t){e&1&&(i(0,"div",21),a(1," Email is required "),r())}function Me(e,t){e&1&&(i(0,"div",21),a(1," Email format is wrong "),r())}function Ge(e,t){e&1&&(i(0,"div",21),a(1," Code is required "),r())}function Ae(e,t){e&1&&(i(0,"div",21),a(1," Password is required "),r())}function Le(e,t){e&1&&(i(0,"div",21),a(1," Password is required "),r())}function Ue(e,t){e&1&&(i(0,"div",21),a(1," Passwords do not match "),r())}var ce=(()=>{let t=class t{constructor(n,s){this.formBuilder=n,this.authService=s,this.form=this.formBuilder.nonNullable.group({email:[{value:this.email,disabled:!0},[(g.required,G.email())]],code:["",g.required],password:["",g.required],confirmPassword:["",[g.required,G.matchValidator("password")]]})}onSubmit(){if(this.form.valid){let n=this.form.getRawValue();this.authService.setPassword(n.email,n.code,n.password)}}};t.\u0275fac=function(s){return new(s||t)(f(M),f(q))},t.\u0275cmp=C({type:t,selectors:[["auth-set-password"]],inputs:{email:"email"},decls:33,vars:22,consts:[["ngForm","ngForm"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","code","id","floatingCode","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingCode"],["type","password","formControlName","password","id","floatingPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingPassword"],["type","password","formControlName","confirmPassword","id","floatingConfirmPassword","placeholder","","autocomplete","off",1,"form-control",3,"ngClass"],["for","floatingConfirmPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"]],template:function(s,l){if(s&1){let p=x();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"form",4,0),b("ngSubmit",function(){return y(p),E(l.onSubmit())}),i(5,"h1",5),a(6,"Set password"),r(),d(7,ke,3,1,"div",6),S(8,"async"),i(9,"div",7),u(10,"input",8),i(11,"label",9),a(12,"Email"),r(),d(13,Be,2,0,"div",10)(14,Me,2,0,"div",10),r(),i(15,"div",7),u(16,"input",11),i(17,"label",12),a(18,"Code"),r(),d(19,Ge,2,0,"div",10),r(),i(20,"div",7),u(21,"input",13),i(22,"label",14),a(23,"Password"),r(),d(24,Ae,2,0,"div",10),r(),i(25,"div",7),u(26,"input",15),i(27,"label",16),a(28,"Confirm password"),r(),d(29,Le,2,0,"div",10)(30,Ue,2,0,"div",10),r(),i(31,"button",17),a(32,"Submit"),r()()()()()}if(s&2){let p=_(4);m(3),o("formGroup",l.form),m(4),o("ngIf",h(8,12,l.authService.errors$)),m(3),o("ngClass",v(14,K,l.form.controls.email.invalid&&(l.form.controls.email.touched||p.submitted))),m(3),o("ngIf",l.form.controls.email.hasError("required")),m(),o("ngIf",l.form.controls.email.hasError("email")),m(2),o("ngClass",v(16,K,l.form.controls.code.invalid&&(l.form.controls.code.touched||p.submitted))),m(3),o("ngIf",l.form.controls.code.hasError("required")),m(2),o("ngClass",v(18,K,l.form.controls.password.invalid&&(l.form.controls.password.touched||p.submitted))),m(3),o("ngIf",l.form.controls.password.hasError("required")),m(2),o("ngClass",v(20,K,l.form.controls.confirmPassword.invalid&&(l.form.controls.confirmPassword.touched||p.submitted))),m(3),o("ngIf",l.form.controls.confirmPassword.hasError("required")),m(),o("ngIf",l.form.controls.confirmPassword.hasError("doNotMatch"))}},dependencies:[P,I,N,T,j,V,D,R,k,B,F]});let e=t;return e})();var He=e=>({"is-invalid":e});function ze(e,t){e&1&&(i(0,"div",17),a(1," Server error "),r())}function Ye(e,t){if(e&1&&(i(0,"div")(1,"div",15),d(2,ze,2,0,"div",16),r()()),e&2){let c=t.ngIf;m(),o("ngSwitch",c.code)}}function Je(e,t){e&1&&(i(0,"div",18),a(1," Email is required "),r())}function Ke(e,t){e&1&&(i(0,"div",18),a(1," Email format is wrong "),r())}function Oe(e,t){if(e&1){let c=x();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"form",7,1),b("ngSubmit",function(){y(c);let s=w();return E(s.onSubmit())}),i(5,"h1",8),a(6,"Reset password"),r(),d(7,Ye,3,1,"div",9),S(8,"async"),i(9,"div",10),u(10,"input",11),i(11,"label",12),a(12,"Email"),r(),d(13,Je,2,0,"div",13)(14,Ke,2,0,"div",13),r(),i(15,"button",14),a(16,"Submit"),r()()()()()}if(e&2){let c=_(4),n=w();m(3),o("formGroup",n.form),m(4),o("ngIf",h(8,5,n.authService.errors$)),m(3),o("ngClass",v(7,He,n.form.controls.email.invalid&&(n.form.controls.email.touched||c.submitted))),m(3),o("ngIf",n.form.controls.email.hasError("required")),m(),o("ngIf",n.form.controls.email.hasError("email"))}}function Qe(e,t){e&1&&(i(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",20),a(5," Please check your emain and confirm. "),r()()()()())}function We(e,t){if(e&1&&u(0,"auth-set-password",21),e&2){let c=w(2);o("email",c.form.controls.email.value)}}function Xe(e,t){if(e&1&&(d(0,Qe,6,0,"div",19),S(1,"async"),d(2,We,1,1,"ng-template",null,2,H)),e&2){let c=_(3),n=w();o("ngIf",!h(1,2,n.authService.resetPasswordResponses$))("ngIfElse",c)}}var pe=(()=>{let t=class t extends ${constructor(n,s,l,p){super(),this.formBuilder=n,this.authService=s,this.titleService=l,this.metaService=p,this.form=this.formBuilder.nonNullable.group({email:["",[g.required,G.email()]]})}onSubmit(){this.form.valid&&this.authService.resetPassword(this.form.controls.email.value)}};t.\u0275fac=function(s){return new(s||t)(f(M),f(q),f(U),f(L))},t.\u0275cmp=C({type:t,selectors:[["auth-reset-password"]],features:[A],decls:4,vars:4,consts:[["responseResult",""],["ngForm","ngForm"],["setPassword",""],["class","component",4,"ngIf","ngIfElse"],[1,"component"],[1,"row","justify-content-center"],[1,"col-10","col-sm-8","col-md-6"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[4,"ngIf"],[1,"form-floating","my-2"],["type","email","formControlName","email","id","floatingEmail","placeholder","name@example.com","autocomplete","on",1,"form-control",3,"ngClass"],["for","floatingEmail"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-2"],[3,"ngSwitch"],["class","alert alert-danger","role","alert",4,"ngSwitchDefault"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf","ngIfElse"],["role","alert",1,"alert","alert-success"],[3,"email"]],template:function(s,l){if(s&1&&(d(0,Oe,17,9,"div",3),S(1,"async"),d(2,Xe,4,4,"ng-template",null,0,H)),s&2){let p=_(3);o("ngIf",!h(1,2,l.authService.resetPasswordResponses$))("ngIfElse",p)}},dependencies:[P,I,N,T,j,V,D,R,k,B,ce,F]});let e=t;return e})();var fe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:se},{path:"signup",component:de},{path:"reset-password",component:pe}];function Vt(e){return ae}var Dt=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Z({type:t}),t.\u0275inj=X({imports:[te,re.forChild(fe),ne]});let e=t;return e})();export{Dt as AuthModule,Vt as getAuthService};
